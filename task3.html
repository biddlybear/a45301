<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="shortcut icon" href="../../assets/ico/favicon.ico">

    <title>A453/01: Task 3</title>

    <!-- Bootstrap core CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/site-theme.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="navbar-fixed-top.css" rel="stylesheet">

    <!-- Just for debugging purposes. Don't actually copy this line! -->
    <!--[if lt IE 9]><script src="js/ie8-responsive-file-warning.js"></script><![endif]-->

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>

  <body>

    <!-- Fixed navbar -->
    <div class="navbar navbar-default navbar-fixed-top" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="index.html">A453 Programming Project</a>
        </div>
        <div class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li><a href="index.html">Home</a></li>
            <li class="dropdown active">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">The Tasks<b class="caret"></b></a>
              <ul class="dropdown-menu">
                <li><a href="task1.html">Task 1</a></li>
                <li><a href="task2.html">Task 2</a></li>
                <li class="active"><a href="task3.html">Task 3</a></li>
              </ul>
            </li>
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">How To<b class="caret"></b></a>
              <ul class="dropdown-menu">
                <li><a href="design.html">Design / Planning</a></li>
                <li><a href="implementation.html">Implementation</a></li>
                <li><a href="evaluation.html">Testing &amp; Evaluation</a></li>
              </ul>
            </li>
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">Teacher Resources<b class="caret"></b></a>
              <ul class="dropdown-menu">
                <li><a href="A453_TickSheet.pdf">A453 Tick Sheet (from mrfrasier.org)</a></li>
                <li><a href="teach_yourself.html">Teach Yourself Python</a></li>
                <li><a href="http://www.codecademy.com">Codecademy</a></li>
                <li><a href="http://www.computingatschool.org.uk/">Computing at School</a></li>
                <li><a href="http://www.cambridgegcsecomputing.org/">OCR Computing MOOC</a></li>
              </ul>
            </li>
          </ul>
          <ul class="nav navbar-nav navbar-right">
            <li class="active"><a>OCR</a></li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </div>

    <div class="container">

      <!-- Main component for a primary marketing message or call to action -->
      <div class="jumbotron">
        <div class="row featurette">
            <h2 class="featurette heading">The final encounter.<br /><span class="text-muted">Let's run the battle and beat Task 3!</span></h2>
            <p class="lead">The final task is the longest and most difficult - think of it as your final boss. Here is how a battle should play out:</p>
            <p>First, the difference between Character A's strength and Character B's strength is calculated. That difference is divided by 5 and rounded down to create a 'strength modifier'. Then do the same thing with Skill to make a 'skill modifier'.</p>
            <p>A 6-sided dice is thrown by each character. If the two dices are the same, nothing happens. If not, the player with the higher result gets to attack!</p>
            <h3>Calculating an Attack</h3>
            <p>The player who won now adds the 'strength modifier' to the strength value and the 'skill modifier' to the skill value for their character. In other words, they 'heal' and regain strength and skill points.</p>
            <p>The player with the lower score subtracts these modifiers from the strength and skill of their player. In other words, they get 'hit'. If the skill goes to 0 or below, it is stored as 0. If the strength does, then it's game over and a winner is declared!</p>
            <p>Difficult, right? Play the game below and it should make a bit more sense.</p>
            <p><strong>NOTE: I've taken a slight detour from the spec to make sure your browsers don't freeze up completely. One problem is that if there is less than five points of difference in the size of strength for the two characters at the beginning, it will never end. Therefore, I've added +1 on the first attack if it is equal to zero. Do not do the same thing in your coursework without justifying your choice and giving a good explanation as to why (i.e. show testing). Also note that there's no need to keep running the encounter until someone is dead necessarily, as there is no mention of that in the spec.</strong></p>
        </div>
      </div>
      <div class="row featurette">
        <div class="col-md-6">
          <h2>Scripted (e.g. Python, JavaScript Console etc.)</h2>
          <p><a class="btn btn-lg btn-primary" id="script_click" role="button">Click to Begin...</a></p>
          <p class="scripted_output"></p>
        </div>
        <div class="col-md-6">
          <h2>GUI (e.g. Visual Basic / HTML &amp; JavaScript / Scratch etc.)</h2>
          <h3>Input the starting values:</h3>
          <p>
            <label for="CharacterAStr" class="input-group-addon">Character A Strength</label><input type="text" name="CharacterAStr" id="CharacterAStr" class="form-control" placeholder="Any number from 10 to 22"><br />
            <label for="CharacterASki" class="input-group-addon">Character A Skill</label><input type="text" name="CharacterASki" id="CharacterASki" class="form-control" placeholder="Any number from 10 to 22"><br />
            <label for="CharacterBStr" class="input-group-addon">Character B Strength</label><input type="text" name="CharacterBStr" id="CharacterBStr" class="form-control" placeholder="Any number from 10 to 22"><br />
            <label for="CharacterBSki" class="input-group-addon">Character B Skill</label><input type="text" name="CharacterBSki" id="CharacterBSki" class="form-control" placeholder="Any number from 10 to 22"><br /></p>
          <p><a class="btn btn-lg btn-primary" id="gui_click" role="button">Click to Fight!</a></p>
          <p class="gui_output"></p>
        </div>
      </div>
      <hr class="featurette-divider">
      <footer>
        <p>&copy; <a href="https://twitter.com/biddly_bear">Biddly Bear</a>. Tasks taken from the OCR 2014 Specification. Please visit me on <a href="https://twitter.com/biddly_bear">Twitter</a>, or head over to my <a href="https://medium.com/@biddly_bear">blog</a> for rambling and more.</p>
      </footer>
    </div> <!-- /container -->


    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script>
      $('#gui_click').click(function(){
        if(isNaN($('#CharacterAStr').val()) || $('#CharacterAStr').val() < 10 || $('#CharacterAStr').val() > 22) {
          alert('Problem with Character A strength');
          exit();
        }
        if(isNaN($('#CharacterASki').val()) || $('#CharacterASki').val() < 10 || $('#CharacterASki').val() > 22) {
          alert('Problem with Character A skill');
          exit();
        }
        if(isNaN($('#CharacterBStr').val()) || $('#CharacterBStr').val() < 10 || $('#CharacterBStr').val() > 22) {
          alert('Problem with Character B strength');
          exit();
        }
        if(isNaN($('#CharacterBSki').val()) || $('#CharacterBSki').val() < 10 || $('#CharacterBSki').val() > 22) {
          alert('Problem with Character B skill');
          exit();
        }

        battleRound($('#CharacterAStr').val(),$('#CharacterASki').val(),$('#CharacterBStr').val(),$('#CharacterBSki').val())
      });

      function battleRound(astr, aski, bstr, bski){
        str_mod = astr - bstr;
        if(str_mod < 0) {
          str_mod = str_mod * -1
        }
        str_mod = Math.floor(str_mod / 5)
        if(str_mod == 0) {
          str_mod = 1;
        }

        ski_mod = aski - bski;
        
        if(ski_mod < 0) {
          ski_mod = ski_mod * -1
        }
        ski_mod = Math.floor(ski_mod / 5)
        if(ski_mod == 0) {
          ski_mod = 1;
        }

        a_di = getRandomInt(1, 6);
        b_di = getRandomInt(1, 6);

        

        if(a_di > b_di) {
          $('.gui_output').append("Character A rolled a " + a_di + ", and Character B rolled a " + b_di + "! Character A Attacks!!!");
          astr = parseInt(astr) + parseInt(str_mod);
          aski = parseInt(aski) + parseInt(ski_mod);
          bstr = parseInt(bstr) - parseInt(str_mod);
          bski = parseInt(bski) - parseInt(ski_mod);
          if(bski < 0) { bski = 0; }
          $('.gui_output').append("<p>A - str:" + astr + "; ski:" + aski + "<br />B - str:" + bstr + "; ski:" + bski +"</p>");
          if(bstr < 0)
          {
            $('.gui_output').append("<p>Character B is down and out - Character A wins!!!</p>");
            exit();
          }
        }

        if(a_di < b_di) {
          $('.gui_output').append("Character A rolled a " + a_di + ", however Character B rolled a " + b_di + "! Character B Attacks!!!");
          astr = parseInt(astr) - parseInt(str_mod);
          aski = parseInt(aski) - parseInt(ski_mod);
          bstr = parseInt(bstr) + parseInt(str_mod);
          bski = parseInt(bski) + parseInt(ski_mod);
          if(aski < 0) { aski = 0; }
          $('.gui_output').append("<p>A - str:" + astr + "; ski:" + aski + "<br />B - str:" + bstr + "; ski:" + bski +"</p>");
          if(astr < 0)
          {
            $('.gui_output').append("<p>Character A is finished - Character B wins!!!</p>");
            exit();
          }
        }

        if(a_di == b_di) {
          $('.gui_output').append("<p>Character A rolled a " + a_di + " --- and Character B rolled a " + b_di + " too! DRAW - Roll again!!!</p>");
        }

        battleRound(astr, aski, bstr, bski)

      }

      $('#script_click').click(function(){
        char_a_str = prompt("Type a number from 10-22 for Character A Strength.");
        if(isNaN(char_a_str) || char_a_str < 10 || char_a_str > 22) {
          alert('Problem with Character A strength. Start again.');
          exit();
        }

        char_a_ski = prompt("Type a number from 10-22 for Character A Skill.");
        if(isNaN(char_a_ski) || char_a_ski < 10 || char_a_ski > 22) {
          alert('Problem with Character A skill. Start again.');
          exit();
        }

        char_b_str = prompt("Type a number from 10-22 for Character B Strength.");
        if(isNaN(char_b_str) || char_b_str < 10 || char_b_str > 22) {
          alert('Problem with Character B strength. Start again.');
          exit();
        }

        char_b_ski = prompt("Type a number from 10-22 for Character B Skill.");
        if(isNaN(char_b_ski) || char_b_ski < 10 || char_b_ski > 22) {
          alert('Problem with Character B skill. Start again.');
          exit();
        }

        battleScrRound(char_a_str,char_a_ski,char_b_str,char_b_ski)
      });

      function battleScrRound(astr, aski, bstr, bski){
        str_mod = astr - bstr;
        if(str_mod < 0) {
          str_mod = str_mod * -1
        }
        str_mod = Math.floor(str_mod / 5)
        if(str_mod == 0) {
          str_mod = 1;
        }

        ski_mod = aski - bski;
        
        if(ski_mod < 0) {
          ski_mod = ski_mod * -1
        }
        ski_mod = Math.floor(ski_mod / 5)
        if(ski_mod == 0) {
          ski_mod = 1;
        }

        a_di = getRandomInt(1, 6);
        b_di = getRandomInt(1, 6);

        

        if(a_di > b_di) {
          $('.scripted_output').append("Character A rolled a " + a_di + ", and Character B rolled a " + b_di + "! Character A Attacks!!!");
          astr = parseInt(astr) + parseInt(str_mod);
          aski = parseInt(aski) + parseInt(ski_mod);
          bstr = parseInt(bstr) - parseInt(str_mod);
          bski = parseInt(bski) - parseInt(ski_mod);
          if(bski < 0) { bski = 0; }
          $('.scripted_output').append("<p>A - str:" + astr + "; ski:" + aski + "<br />B - str:" + bstr + "; ski:" + bski +"</p>");
          if(bstr < 0)
          {
            $('.scripted_output').append("<p>Character B is down and out - Character A wins!!!</p>");
            exit();
          }
        }

        if(a_di < b_di) {
          $('.scripted_output').append("Character A rolled a " + a_di + ", however Character B rolled a " + b_di + "! Character B Attacks!!!");
          astr = parseInt(astr) - parseInt(str_mod);
          aski = parseInt(aski) - parseInt(ski_mod);
          bstr = parseInt(bstr) + parseInt(str_mod);
          bski = parseInt(bski) + parseInt(ski_mod);
          if(aski < 0) { aski = 0; }
          $('.scripted_output').append("<p>A - str:" + astr + "; ski:" + aski + "<br />B - str:" + bstr + "; ski:" + bski +"</p>");
          if(astr < 0)
          {
            $('.scripted_output').append("<p>Character A is finished - Character B wins!!!</p>");
            exit();
          }
        }

        if(a_di == b_di) {
          $('.scripted_output').append("<p>Character A rolled a " + a_di + " --- and Character B rolled a " + b_di + " too! DRAW - Roll again!!!</p>");
        }

        battleScrRound(astr, aski, bstr, bski)
        
      }

      function getRandomInt (min, max) {
        return Math.floor(Math.random() * (max - min + 1)) + min;
      }
    </script>
  </body>
</html>
